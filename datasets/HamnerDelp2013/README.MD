# HamnerDelp2013

*Human* / *Running* / *Treadmill*

The data in this folder originally comes from a [publicly available dataset](https://simtk.org/projects/nmbl_running) released with the paper:

**Hamner SR & Delp SL (2013). Muscle contributions to fore-aft and vertical body mass center accelerations over a range of running speeds. *J Biomech*, 46(4): 780-787. doi: [10.1016/j.jbiomech.2012.11.024](https://doi.org/10.1016/j.jbiomech.2012.11.024)** 

And has been processed as described in the paper:

**Fox A (2024). The quest for dynamic consistency: a comparison of OpenSim tools for residual reduction in simulations of human running. *R Soc Open Sci*, 11(5): 231909. doi: [10.1098/rsos.231909](https://doi.org/10.1098/rsos.231909)** 

Any additional use must be in line with that described in both papers.

## data

The `data` folder contains the processed outputs for each participant within individual folders (e.g. `subject01`). The data was processed in Fox (2024) to generate torque driven simulations of running gait cycles using different residual reduction approaches. The results from Inverse Kinematics, and the RRA and Moco Track approaches described by Fox (2024) are included in this repository to demonstrate the use of the Zero Moment Point approach in estimating ground reactions from data with: (i) no residual reduction (i.e. Inverse Kinematics); (ii) moderate residual reduction (i.e. that generated by the Residual Reduction Algorithm); and (iii) significant residual reduction (i.e. that generated by Moco Track). 

Within each participant folder you will find the sub-folders of:

- **expData:** The original `.trc` and `.mot` files from the experimental data, alongside a Python dictionary object (in `.pkl` format) containing the timings of the gait cycles analysed.
- **ik:** The results from the original inverse kinematics procedures run on the data.
- **moco:** The outputs from the Moco tracking processes run on the experimental data. This contains the residual forces and moments that were generated from the Moco tracking approach.
- **model:** The scaled model based on the original experimental approaches used. This model was used in the Moco and RRA procedures. 
- **rra:** The outputs from the residual reduction algorithm (RRA) processes run on the experimental data. This contains the residual forces and moments that were generated from a single iteration of the RRA approach.

Additional data files above what was included in Fox (2024) are also present in these folders for use in the Zero Moment Point calculations, which were generated via Python scripts (see **code** section below).

## code

The Python scripts in this folder were developed using **OpenSim v4.5** alongside **Python 3.10** on **Windows**. The code may work with other versions or operating systems, but has not been tested for this. The script uses relative file paths to extract the data so the code must be run from its own directory (i.e. the `code` folder) â€” which is typically the default of most Python IDEs. Below is a description of each script:

- **`prepareData.py`**: Used to generate appropriate files for the data from Fox (2024) to be used with the Zero Moment Point tools in OpenSim. See notes and comments in script for more details.

There are various dependencies associated with the code, which include:

- **[TODO: add dependencies]**
